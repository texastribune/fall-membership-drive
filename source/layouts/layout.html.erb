<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" >
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Fall Membership Drive | The Texas Tribune</title>
    <link rel="shortcut icon" type="image/x-icon" href="https://s3.amazonaws.com/static.texastribune.org/common/images/favicon.ico">
    <!-- Open Graph info -->
    <meta property="og:title" content="Fall Membership Drive | The Texas Tribune">
    <meta property="og:type" content="website">
    <meta property="og:description" content="The Texas Tribune 2014 fall membership drive celebrates the Tribune's first five years.">
    <%= stylesheet_link_tag "//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" %>
    <!-- Apple icons -->
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="http://s3.amazonaws.com/static.texastribune.org/media/icons/iPhone_Icon_60x60.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://s3.amazonaws.com/static.texastribune.org/media/icons/iPad_Icon_76x76.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://s3.amazonaws.com/static.texastribune.org/media/icons/iPhone_Icon_120x120.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://s3.amazonaws.com/static.texastribune.org/media/icons/iPad_Icon_152x152.png"/>
    <%= stylesheet_link_tag "app" %>
    <script src="//use.typekit.net/zww2dfy.js"></script>
    <script>try{Typekit.load();}catch(e){}</script>
  </head>
  <body>
      <%= partial "header" %>
      <%= yield %>
    <%= partial "footer" %>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="js/jquery.fitvids.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.3/waypoints.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.5/shortcuts/sticky-elements/waypoints-sticky.min.js"></script>
    <script src="js/jquery.counterup.min.js"></script>
    <script>
      $(document).ready(function() {
        // Wrap videos and apply CSS for fluid width
        $('.video').fitVids();

        // For Texas Weekly counter
        $('.counter').counterUp({
          delay: 50,
          time: 3000
        });

        // For smooth animation to anchor links
        $('a[href^="#').on('click', function(e) {
          e.preventDefault();

          var target = this.hash,
          $target = $(target);

          $('html, body').stop().animate({
            'scrollTop': $target.offset().top
          }, 900, 'swing', function () {
            window.location.hash.target;
          })
        })
      });

      // Using waypoints to change active nav class
      $('#story').waypoint(function() {
        $('.header li').removeClass('active');
        $('.header-link[href=#story]').closest('li').addClass('active');
      });

      $('#data').waypoint(function() {
        $('.header li').removeClass('active');
        $('.header-link[href=#data]').closest('li').addClass('active');
      });

      $('#awards').waypoint(function() {
        $('.header li').removeClass('active');
        $('.header-link[href=#awards]').closest('li').addClass('active');
      });

      $('#events').waypoint(function() {
        $('.header li').removeClass('active');
        $('.header-link[href=#events]').closest('li').addClass('active');
      });

      $('#engagement').waypoint(function() {
        $('.header li').removeClass('active');
        $('.header-link[href=#engagement]').closest('li').addClass('active');
      });

      $('#donate').waypoint(function() {
        $('.header li').removeClass('active');
        $('.header-link[href=#donate]').closest('li').addClass('active');
      });

      // Make header sticky when reaches top of viewport
      // Works with .stuck class in CSS, which fixes it to top
      $('header').waypoint('sticky', {
        offset: 0
      });
    </script>
  </body>
</html>
